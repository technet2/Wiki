---
layout: default
title: 'Network Device Enrollment Services (NDES) Frequently Asked Questions (FAQ)&#58; - TechNet Articles - United States (English) - TechNet Wiki'
weight: 3
---

<div class="post-content user-defined-markup">

<p><div class="table-of-contents"><h2 class="title">Table of Contents</h2><div class="hierarchy-list-header"> </div><ul class="hierarchy-list"><li c</div></div>
<div class="content-fragment-footer"></div>
<div class="content-fragment-bottom fiji-content-fragment-bottom"><div class="r1 fiji-r1"></div><div class="r2 fiji-r2"></div><div class="r3 fiji-r3"></div><div class="r4 fiji-r4"></div></div></div></div>
<div class="content-fragment page no-wrapper" id="fragment-6615">
<div class="content-fragment-inner fiji-content-fragment-inner"><div class="content-fragment-top fiji-content-fragment-top"><div class="r1 fiji-r1"></div><div class="r2 fiji-r2"></div><div class="r3 fiji-r3"></div><div class="r4 fiji-r4"></div></div><div class="content-fragment-content">

<div class="full-post-header"></div>
<div class="full-post">
    <h1 class="post-name">Network Device Enrollment Services (NDES) Frequently Asked Questions (FAQ):</h1>
    

    <div class="post-content user-defined-markup">

<p><div class="table-of-contents"><h2 cllass="hierarchy-item"><a href="#What_is_MDM">What is MDM?</a></li><li class="hierarchy-item"><a href="#Can_I_cluster_NDES">Can I cluster NDES?</a></li><li class="hierarchy-item"><a href="#The_network_load_balancing_hardware_software_allows_our_network_to_pick_a_higher_affinity_active_node_and_then_failover_to_a_passive_node_during_an_outage_Will_this_solution_suffice_as_a_workaround_for_NDES_load_balancing">The
 network load balancing hardware/software allows our network to pick a higher affinity active node, and then failover to a passive node during an outage. Will this solution suffice as a workaround for NDES load balancing?</a></li><li class="hierarchy-item"><a href="#Can_I_use_a_single_password_or_passphrase_for_device_enrollment">Can I use a single password or passphrase for device enrollment?</a></li><li class="hierarchy-item"><a href="#Can_I_use_a_Static_Passphrase_across_multiple_NDES_servers_and_then_load_balance_them">Can I use a Static Passphrase across multiple NDES servers and then load balance
 them?</a></li><li class="hierarchy-item"><a href="#Can_I_use_a_Clustered_Certification_Authority_behind_a_server_running_NDES">Can I use a Clustered Certification Authority behind a server running NDES?</a></li><li class="hierarchy-item"><a href="#Can_I_install_the_NDES_role_on_a_Clustered_Certification_Authority">Can I install the NDES role on a Clustered Certification Authority?</a></li><li class="hierarchy-item"><a href="#How_many_passwords_can_NDES_generate">How many passwords can NDES generate?</a></li><li class="hierarchy-item"><a href="#If_a_device_fails_the_enrollment_process_can_I_retry_the_enrollment_process_using_the_same_passphrase">If a device fails the enrollment process, can I retry the enrollment
 process using the same passphrase?</a></li><li class="hierarchy-item"><a href="#What_kind_of_certificate_templates_can_I_use_with_NDES">What kind of certificate templates can I use with NDES?</a></li><li class="hierarchy-item"><a href="#Which_certificate_template_versions_should_I_use_with_this_NDES">Which certificate template versions should I use with this NDES?</a></li></ul><div class="hierarchy-list-footer"> </div></div><span style="font-family:cambria;font-size:24px;"><br />
What is NDES?</span> </p>
<p><span style="font-family:calibri;"><a name="top">The</a> Network Device Enrollment Service allows software on routers and other network devices running without domain credentials to obtain certificates based on the Simple Certificate Enrollment Protocol (SCEP).
 You can read an overview and details about the service by reviewing </span><a href="http://social.technet.microsoft.com/wiki/contents/articles/9063.network-device-enrollment-service-ndes-in-active-directory-certificate-services-ad-cs.aspx"><span style="font-family:calibri;">Network
 Device Enrollment Service (NDES) in Active Directory Certificate Services (AD CS)</span></a><span style="font-family:calibri;">.</span></p>
<h1><a name="What_is_MDM"></a><span style="font-family:cambria;font-size:24px;">What is MDM?</span>
</h1>
<p><span style="font-family:calibri;">NDES can also be used in conjunction with some Mobile Device Management (MDM) software to deploy certificates to mobile devices. For detailed steps about configuring the service, refer to
</span><a href="http://technet.microsoft.com/en-us/library/cc770911.aspx"><span style="font-family:calibri;">Configure the Network Device Enrollment Service<br />
</span></a><span style="font-family:calibri;">NDES does not perform any identity verification. The MDM solution extends NDES to additional functionalities that it was not made for. It is highly recommended to have additional identity verification methods.<br />
<br />
<span>Warning: SCEP was designed to be used in a closed network where all end-points are trusted. The warnings from CERT in the article &quot;<a title="SCEP security concern" href="http://www.kb.cert.org/vuls/id/971035" target="_blank">Simple
 Certificate Enrollment Protocol (SCEP) does not strongly authenticate certificate requests</a>&quot; should be considered when implementing the NDES service. If an application utilizes SCEP, it&nbsp;should provide its own strong authentication.</span></span></p>
<p><a href="#top">return to top</a></p>
<h1><a name="Can_I_cluster_NDES"></a><span style="font-family:cambria;font-size:24px;">Can I cluster NDES?</span></h1>
<p><span style="font-family:calibri;">This is not simple task, and there is not an option out of the box to support clustering or load balancing of the NDES. NDES creates a unique one-time passphrase used for enrollment, which doesn’t guarantee that a requesting
 device will always contact the same enrollment NDES server that created the password.</span></p>
<p><span style="font-family:calibri;">In addition, NDES does not have a database; hence clustering using Microsoft Clustering Services is not an option. Furthermore, clustering and load balancing NDES are not currently supported by Microsoft<br />
<br />
<a href="#top">return to top</a></span></p>
<h1><a name="The_network_load_balancing_hardware_software_allows_our_network_to_pick_a_higher_affinity_active_node_and_then_failover_to_a_passive_node_during_an_outage_Will_this_solution_suffice_as_a_workaround_for_NDES_load_balancing"></a><span style="font-family:cambria;font-size:24px;">The
 network load balancing hardware/software allows our network to pick a higher affinity active node, and then failover to a passive node during an outage. Will this solution suffice as a workaround for NDES load balancing?</span></h1>
<p><span style="font-family:calibri;">This solution can work so long as the active node is always on. However, if the active node generates the one time passphrase, and then failed, then devices will fail enrollment because the second node does not have the
 passphrase.<br />
</span></p>
<p><a href="#top">return to top</a></p>
<h1><a name="Can_I_use_a_single_password_or_passphrase_for_device_enrollment"></a><span style="font-family:cambria;font-size:24px;">Can I use a single password or passphrase for device enrollment?</span></h1>
<p><span style="font-family:calibri;">Yes,and_then_failover_to_a_passive_node_during_an_outage_Will_this_solution_suffice_as_a_workaround_for_NDES_load_balancing"></a><span style="font-family:cambria;font-size:24px;">The
 network load balancing hardware/software allows our network to pick a higher affinity active node, and then failover to a passive node during an outage. Will this solution suffice as a workaround for NDES load balancing?</span></h1>
<p><span style="font-family:calibri;">This solution can work so long as the active node is always on. However, if the active node generates the one time passphrase, and then failed, then devices will fail enrollment because the second node does not have the
 passphrase.<br />
</span></p>
<p><a href="#top">return to top</a></p>
<h1><a name="Can_I_use_a_single_password_or_passphrase_for_device_enrollme however this is a non-secure solution and will make it easy for anyone to use the same passphrase to enroll any device for certificates. Doing so defeats using certificates to allow only approved devices on your network.
</span></p>
<p><span style="font-family:calibri;">NDES allows the generation of 5 unique passwords every 60 minutes by default.&nbsp; Using the single password option also requires adding the SinglePassword registry key. Refer to
</span><a href="http://technet.microsoft.com/en-us/library/ff955642%28v=ws.10%29.aspx#BKMK_CfgNdes"><span style="font-family:calibri;">Configuring NDES</span></a><span style="font-family:calibri;"> for more information about the various NDES
 configuration options.<br />
</span></p>
<p><a href="#top">return to top</a></p>
<h1><a name="Can_I_use_a_Static_Passphrase_across_multiple_NDES_servers_and_then_load_balance_them"></a><span style="font-family:cambria;font-size:24px;">Can I use a Static Passphrase across multiple NDES servers and then load balance
 them?</span></h1>
<p><span style="font-family:calibri;">Yes, but this solution makes your NDES deployment less secure because of the same reasons mentioned as the answer for Can I use a single password or passphrase for device enrollment?<br />
In addition, this method is not supported&nbsp;by Microsoft<br />
</span></p>
<p><a href="#top">return to top</a></p>
<h1><a name="Can_I_use_a_Clustered_Certification_Authority_behind_a_server_running_NDES"></a><span style="font-family:cambria;font-size:24px;">Can I use a Clustered Certification Authority behind a server running NDES?</span></h1>
<p><span style="font-family:calibri;">Yes. You can also install multiple NDES servers pointing to the same Clustered Certification Authority.<br />
</span></p>
<p><a href="#top">return to top</a></p>
<h1><a name="Can_I_install_the_NDES_role_on_a_Clustered_Certification_Authority"></a><span style="font-family:cambria;font-size:24px;">Can I install the NDES role on a Clustered Certification Authority?</span></h1>
<p><span style="font-family:calibri;">You can install it on any of the Certification Authority cluster nodes, and then point the NDES configuration to the Clustered Certification Authority to request certificates. This will not provide service high availability
 or load balancing. It is recommended to install the Network Device Enrollment Service on a separate member server if you already have a clustered CA.<br />
</span></p>
<p><a href="#top">return to top</a></p>
<h1><a name="How_many_passwords_can_NDES_generate"></a><span style="font-family:cambria;font-size:24px;">How many passwords can NDES generate?</span></h1>
<p><span style="font-family:calibri;">NDES generates 5 passwords that are cached for 60 minutes by default. This means that the device has to complete its enrollment process within 60 minutes of the password generation before the password expires.</span></p>
<p><span style="font-family:calibri;">NDES can’t generate more passwords after the fifth until at least one device completed the enrollment process. Consider the following scenario:</span></p>
<p><span style="font-family:calibri;">An administrator requests 5 passwords for 5 different devices. The 5 password are valid for 60 minutes, within the 60 minutes he was asked to generate a new password for a new device – 6<sup><span style="font-size:13px;">th</span></sup>
 device – The NDES service will fail to generate a password because none of the devices completed the enrollment process.</span></p>
<p><span style="font-family:calibri;">Consider the same scenario, where the administrator completed at least one device enrollment, then the NDES service can generate a new password for the 6<sup><span style="font-size:13px;">th</span></sup> device.</span></p>
<p><span style="font-family:calibri;">The defaults can be changed using the PasswordValidity and PasswordMax registry which are documented in
</span><a href="http://technet.microsoft.com/en-us/library/ff955642%28v=ws.10%29.aspx#BKMK_CfgNdes"><span style="font-family:calibri;">Configuring NDES<br />
</span></a></p>
<p><a href="#top">return to top</a></p>
<h1><a name="If_a_device_fails_the_enrollment_process_can_I_retry_the_enrollment_process_using_the_same_passphrase"></a><span style="font-family:cambria;font-size:24px;">If a device fails the enrollment process, can I retry the enrollment
 process using the same passphrase?</span></h1>
<p><span style="font-family:calibri;">No, you need to repeat the entire enrollment process.</span></p>
<h1><a name="What_kind_of_certificate_templates_can_I_use_with_NDES"></a><span style="font-family:cambria;font-size:24px;">What kind of certificate templates can I use with NDES?</span></h1>
<p><span style="font-family:calibri;">You can use templates intended for <strong>computers</strong> only – user templates cannot be enrolled using NDES.<br />
</span></p>
<p><a href="#top">return to top</a></p>
<h1><a name="Which_certificate_template_versions_should_I_use_with_this_NDES"></a><span style="font-family:cambria;font-size:24px;">Which certificate template versions should I use with this NDES?</span></h1>
<p><span style="font-family:calibri;">You can use Version 1 through Version 3 certificate templates. The template version used depends on the device supporting a Cryptographic Service Provider (CSP) or a Key Storage Provider (KSP). If the device supports a CSP,
 then you can use Version 1 and 2 templates. If the device supports a KSP, then you can use version 3 templates. Consult your device’s vendor to know which provider is supported.<br />
</span></p>
<p><span style="font-family:calibri;"><a href="#top">return to top</a></span></p>

</div>
    
    
