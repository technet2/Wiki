---
layout: default
title: Microsoft Windows Server 2016&#58; DHCP Server Installation & Configuration - TechNet Articles - United States (English) - TechNet Wiki
weight: 3
---

<div class="post-content user-defined-markup">

<hr />
<div class="table-of-contents"><h2 class="title">Table of Contents</h2><div class="hierarchy-list-header"> </div><ul class="hierarchy-list"><li class="hierarchy-item"><a href="#Summary">Summary</a></li><li class="hierarchy-item"><a href="#Objective">Objective</a></li><li class="hierarchy-item"><a href="#Installation_Procedure">Installation Procedure</a></li><li class="hierarchy-item"><a href="#Install_using_PowerShell1">Install using PowerShell</a></li><li class="hierarchy-item"><a href="#Install_using_PowerShell2">Install Using GUI</a></li><li class="hierarchy-item"><a href="#DORA_Discover_Offer_Request_Acknowledgment">DORA (Discover, Offer, Request Acknowledgment)</a></li></ul><div class="hierarchy-list-footer"> </div></div>
<h1 style="text-align:justify;"><a name="Summary"></a>Summary</h1>
<div style="text-align:justify;">This article is about Dynamic Host Configuration Protocol (DHCP) is to assign network settings automatically to every workstation in the network by a central server rather than configuring them locally on each. A host configured
 to use DHCP is enabled to configure itself completely and automatically according to directions from the server.
<br />
</div>
<h1><a name="Objective"></a>Objective</h1>
<div style="text-align:justify;">Main Functionality of DHCP server is to provide clients auto IP Address, Subnet mask, DNS Address and Gateway Address whenever clients request in the network in auto-configure mode. This document provides information on How to
 install &amp; Configure DHCP Server.<br />
</div>
<h1 style="text-align:justify;"><a name="Installation_Procedure"></a>Installation Procedure</h1>
<div style="text-align:justify;">There are two methods of installation DHCP Server feature in the server manager.
<br />
<ol>
<li>Install using PowerShell </li><li>Role &amp; Feature-based Installation </li></ol>
</div>
<h1 style="text-align:justify;"><a name="Install_using_PowerShell1"></a>Install using PowerShell</h1>
<div style="text-align:justify;">DHCP role can be installed using the PowerShell. It is a command line interface for running command to perform the installation with minimal resources, the same installation which can be done in GUI based environment can be done
 in PowerShell. <br />
<br />
Follow the below instructions. Click the Windows button, then Windows PowerShell folder and Windows PowerShell as shown in the diagram.
<br />
<br />
<a href="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/communityserver-wikis-components-files/00-00-00-00-05/013384.1.png"><img alt=" " src="https://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/communityserver-wikis-components-files/00-00-00-00-05/013384.1.png" width="407" height="401" style="border-width:0px;border-style:solid;" /></a><br />
<br />
The other way to open PowerShell is to click Windows button, then Server Manager and from the Server Manager window click the tools and select Windows PowerShell.<br />
<br />
<a href="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/communityserver-wikis-components-files/00-00-00-00-05/8400.2.jpg"><img alt=" " src="https://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/communityserver-wikis-components-files/00-00-00-00-05/8400.2.jpg" style="border-width:0px;border-style:solid;" /></a><br />
<br />
Write down the command add-WindowsFeature –IncludeManagementTools dhcp This will install the DHCP role with the following output.
<br />
<br />
<a href="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/communityserver-wikis-components-files/00-00-00-00-05/10357.3.jpg"><img alt=" " src="https://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/communityserver-wikis-components-files/00-00-00-00-05/10357.3.jpg" style="border-width:0px;border-style:solid;" /></a><br />
</div>
<h1 style="text-align:justify;"><a name="Install_using_PowerShell2"></a>Install Using GUI
</h1>
To install the DHCP role in a GUI environment using the following instructions.<br />
<br />
To start installation first click the Windows button and then Server Manager.<br />
<br />
<a href="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/communityserver-wikis-components-files/00-00-00-00-05/264727.4.jpg"><img alt=" " src="https://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/communityserver-wikis-components-files/00-00-00-00-05/264727.4.jpg" style="border-width:0px;border-style:solid;" /></a><br />
<br />
OIn the Server Manager window click Dashboard and then click Add roles and features.<br />
<br />
<a href="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/communityserver-wikis-components-files/00-00-00-00-05/46655.2.jpg"><img alt=" " src="https://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/communityserver-wikis-components-files/00-00-00-00-05/46655.2.jpg" style="border-width:0px;border-style:solid;" /></a><br />
<br />
In the Add roles and features Wizard, click Next.<br />
<br />
<a href="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/communityserver-wikis-components-files/00-00-00-00-05/38044.3.jpg"><img alt=" " src="https://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/communityserver-wikis-components-files/00-00-00-00-05/38044.3.jpg" style="border-width:0px;border-style:solid;" /></a><br />
<br />
Note: Read out the information on the screen that is relevant to the installation of roles and windows sever requirements.<br />
<br />
First Select the installation type as role-based or feature-based installation as shown in the following diagram then click on Next.<br />
<br />
<a href="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/communityserver-wikis-components-files/00-00-00-00-05/26846.4.jpg"><img alt=" " src="https://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/communityserver-wikis-components-files/00-00-00-00-05/26846.4.jpg" style="border-width:0px;border-style:solid;" /></a><br />
<br />
Select the server from the server pool on which you are going to install the role as shown in following window then click Next.<br />
<br />
<a href="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/communityserver-wikis-components-files/00-00-00-00-05/7752.5.png"><img alt=" " src="https://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/communityserver-wikis-components-files/00-00-00-00-05/7752.5.png" style="border-width:0px;border-style:solid;" /></a><br />
<br />
In next screen you can select multiple roles here we will Click on DHCP Server then a new window appears which show that required tools to be added click on Add Feature.<br />
<br />
<a href="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/communityserver-wikis-components-files/00-00-00-00-05/4064.6.jpg"><img alt=" " src="https://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/communityserver-wikis-components-files/00-00-00-00-05/4064.6.jpg" style="border-width:0px;border-style:solid;" /></a><br />
<br />
Click Next to go to next step.<br />
<br />
<a href="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/communityserver-wikis-components-files/00-00-00-00-05/4478.7.jpg"><img alt=" " src="https://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/communityserver-wikis-components-files/00-00-00-00-05/4478.7.jpg" style="border-width:0px;border-style:solid;" /></a><br />
<br />
Click Next.<br />
<br />
<a href="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/communityserver-wikis-components-files/00-00-00-00-05/13071.8.png"><img alt=" " src="https://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/communityserver-wikis-components-files/00-00-00-00-05/13071.8.png" style="border-width:0px;border-style:solid;" /></a><br />
<br />
First click on the checkbox. Restart the destination server automatically if required, then click Yes and in the last click Install to start the installation process.<br />
<br />
<a href="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/communityserver-wikis-components-files/00-00-00-00-05/0412.9.jpg"><img alt=" " src="https://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/communityserver-wikis-components-files/00-00-00-00-05/0412.9.jpg" style="border-width:0px;border-style:solid;" /></a><br />
<br />
When the feature installation succeeded message shown under the progress bar Then click on Close to exit from the wizard.<br />
<br />
<a href="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/communityserver-wikis-components-files/00-00-00-00-05/4331.10.jpg"><img alt=" " src="https://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/communityserver-wikis-components-files/00-00-00-00-05/4331.10.jpg" style="border-width:0px;border-style:solid;" /></a><br />
<br />
<div style="text-align:justify;">After installation of the DHCP role, the next section is configuration, how and what IP addresses range to use, which gateway router and DNS server may be used and for how much time it should be used. Now to open DHCP Console
 go to Window Button on the taskbar then click Server Manager. <span class="field-item-input">
<br />
<br />
<a href="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/communityserver-wikis-components-files/00-00-00-00-05/3771.11.jpg"><img alt=" " src="https://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/communityserver-wikis-components-files/00-00-00-00-05/3771.11.jpg" width="230" height="305" style="border-width:0px;border-style:solid;" /></a><br />
<br />
<span id="ctl00_ctl00_content_content_ctl00_w_5411_ctl01_ctl00_WikiPageForm_ctl05_Body_ctl01_Editor"></span></span></div>
In the server manager window Click on Tools then DHCP to open the DHCP configuration console.<br />
<br />
<a href="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/communityserver-wikis-components-files/00-00-00-00-05/3531.17.jpg"><img alt=" " src="https://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/communityserver-wikis-components-files/00-00-00-00-05/3531.17.jpg" style="border-width:0px;border-style:solid;" /></a><br />
<br />
<div style="text-align:justify;">DHCP scope has a valid range of IP addresses pool to be given to clients by leasing, the mac address reservation, exclusion and other scope option can be done. Further information is shared as follows with stepwise actions. In
 the DHCP console right click on IPV4 then click on New Scope…to create a new scope.<br />
<br />
<a href="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/communityserver-wikis-components-files/00-00-00-00-05/15787.18.jpg"><img alt=" " src="https://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/communityserver-wikis-components-files/00-00-00-00-05/15787.18.jpg" style="border-width:0px;border-style:solid;" /></a><br />
<br />
The new scope wizard helps you set up scope for distributing IP addresses to network computers in the network. To continue further Click Next.<br />
<br />
<a href="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/communityserver-wikis-components-files/00-00-00-00-05/1200.14.jpg"><img alt=" " src="https://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/communityserver-wikis-components-files/00-00-00-00-05/1200.14.jpg" style="border-width:0px;border-style:solid;" /></a><br />
<br />
Here we define the scope name that will identify the scope. First, enter the Name of the scope the click Next.<br />
<br />
<a href="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/communityserver-wikis-components-files/00-00-00-00-05/5504.15.jpg"><img alt=" " src="https://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/communityserver-wikis-components-files/00-00-00-00-05/5504.15.jpg" style="border-width:0px;border-style:solid;" /></a><br />
<br />
Enter the range of IP address that client will have assigned as in the following diagram. The Length and Subnet mask can be customized also according to requirements. Click Next.<br />
<br />
<a href="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/communityserver-wikis-components-files/00-00-00-00-05/1325.16.jpg"><img alt=" " src="https://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/communityserver-wikis-components-files/00-00-00-00-05/1325.16.jpg" style="border-width:0px;border-style:solid;" /></a><br />
<br />
If there is an IP address that comes in the range of IP address given in DHCP server can be excluded by adding the range of IP addresses. Click Next.<br />
<br />
<a href="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/communityserver-wikis-components-files/00-00-00-00-05/0652.19.jpg"><img alt=" " src="https://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/communityserver-wikis-components-files/00-00-00-00-05/0652.19.jpg" style="border-width:0px;border-style:solid;" /></a><br />
<br />
The lease duration specifies how long a client can use an IP address from this scope. The default is 8 days time for leasing one IP address, this time is customization. Set the lease duration time then click Next.<br />
<br />
<a href="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/communityserver-wikis-components-files/00-00-00-00-05/8712.20.jpg"><img alt=" " src="https://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/communityserver-wikis-components-files/00-00-00-00-05/8712.20.jpg" style="border-width:0px;border-style:solid;" /></a><br />
<br />
If you have some other options like DNS servers WiNS you can add it here by choosing Yes radio button. Then click Next.
<br />
<br />
<a href="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/communityserver-wikis-components-files/00-00-00-00-05/1385.111.jpg"><img alt=" " src="https://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/communityserver-wikis-components-files/00-00-00-00-05/1385.111.jpg" style="border-width:0px;border-style:solid;" /></a><br />
<br />
Here we can specify the routers, default gateways to be distributed by this scope. Enter the IP address of the Router or Gateway by typing the IP address in a text box, then click the Add button.
<br />
<br />
<a href="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/communityserver-wikis-components-files/00-00-00-00-05/7367.222.jpg"><img alt=" " src="https://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/communityserver-wikis-components-files/00-00-00-00-05/7367.222.jpg" style="border-width:0px;border-style:solid;" /></a><br />
<br />
Now the IP address is added now click Next to continue to next step. <br />
<br />
<a href="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/communityserver-wikis-components-files/00-00-00-00-05/2671.444.jpg"><img alt=" " src="https://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/communityserver-wikis-components-files/00-00-00-00-05/2671.444.jpg" style="border-width:0px;border-style:solid;" /></a><br />
<br />
Enter the DNS server IP addresses according to set up that we want our client to use. Then click Next.<br />
<br />
<a href="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/communityserver-wikis-components-files/00-00-00-00-05/8267.555.jpg"><img alt=" " src="https://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/communityserver-wikis-components-files/00-00-00-00-05/8267.555.jpg" style="border-width:0px;border-style:solid;" /></a><br />
<br />
If there is no DNS server in the network the WINS server can be used, which convert the NetBIOS computer name to IP address. Enter the WINS server IP addresses according to your setup. Then click Next.
<br />
<br />
<a href="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/communityserver-wikis-components-files/00-00-00-00-05/8206.12.jpg"><img alt=" " src="https://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/communityserver-wikis-components-files/00-00-00-00-05/8206.12.jpg" style="border-width:0px;border-style:solid;" /></a><br />
<br />
After almost  click Next.<br />
<br />
<a href="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/communityserver-wikis-components-files/00-00-00-00-05/8267.555.jpg"><img alt=" " src="https://social.technet.micreation of the scope at this step, the scope needs to be activated that clients can obtain address leases only if a scope is activated. Chose Yes, I want to activate this scope now then click Next to go to the last step.
<br />
<br />
<a href="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/communityserver-wikis-components-files/00-00-00-00-05/4087.13.jpg"><img alt=" " src="https://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/communityserver-wikis-components-files/00-00-00-00-05/4087.13.jpg" style="border-width:0px;border-style:solid;" /></a><br />
<br />
The completing the new scope wizard show you have successfully completed the new wizard scope On successful configuration of scope click Finish.<br />
<br />
</div>
<a href="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/communityserver-wikis-components-files/00-00-00-00-05/4477.1.jpg"><img alt=" " src="https://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/communityserver-wikis-components-files/00-00-00-00-05/4477.1.jpg" style="border-width:0px;border-style:solid;" /></a><br />
<br />
The Scope is created and activated as well as shown in the following diagram.<br />
<br />
<br />
<a href="http://social.technet.microsoft.com/wiki/cfs-file.ashx/__key/communityserver-wikis-components-files/00-00-00-00-05/7688308.2.jpg"><img alt=" " src="https://social.technet.microsoft.com/wiki/resized-image.ashx/__size/550x0/__key/communityserver-wikis-components-files/00-00-00-00-05/7688308.2.jpg" style="border-width:0px;border-style:solid;" /></a><br />
<br />
<h1><a name="DORA_Discover_Offer_Request_Acknowledgment"></a>DORA (Discover, Offer, Request Acknowledgment)</h1>
The process of obtaining automatic IP address on DHCP client.<br />
<br />
<ol>
<li style="text-align:justify;"><strong>DHCPDiscover</strong>: whenever the computer turned on connected to LAN send a broadcast message and look for the DHCP server.
</li><li style="text-align:justify;"><strong>DHCPOffer</strong>: when the DHCP server receives the Discover message, the DHCP server sends a broadcast message to the client that I have an offer(TCP/IP configuration) for you.
</li><li style="text-align:justify;"><strong>DHCPRequest</strong>: when the client receives the offer broadcast then it sends a request that I am ready to accept the offer (TCP/IP configuration).
</li><li style="text-align:justify;"><strong>DHCPACK</strong>: the request is entertained by DHCP server and sends an acknowledgment broadcast that you got it (TCP/IP configuration) but it will be with lease duration. The default lease duration is 8 days when 50%
 of the time is consumed the DHCP client request DHCP server unicast the to renew the lease duration.
</li></ol>
<strong>Further readings:-</strong><a href="https://docs.microsoft.com/en-us/windows-server/networking/technologies/dhcp/dhcp-top">https://docs.microsoft.com/en-us/windows-server/networking/technologies/dhcp/dhcp-top</a>

</div>
    
    